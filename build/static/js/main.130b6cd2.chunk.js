(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{13:function(e,t,n){e.exports=n(39)},38:function(e,t,n){},39:function(e,t,n){"use strict";n.r(t);var a=n(0),u=n.n(a),o=n(11),r=n.n(o),c=n(12),i=n(2),l=n(3),s=n.n(l),m="/api/persons",f=function(){return s.a.get(m)},d=function(e){return s.a.post(m,e)},h=function(e){s.a.delete("".concat(m,"/").concat(e))},p=function(e,t){return s.a.put("".concat(m,"/").concat(e),t)},v=(n(38),function(e){var t=e.showAll,n=e.handleShowChange;return u.a.createElement("div",null,"rajaa n\xe4ytett\xe4vi\xe4: ",u.a.createElement("input",{value:t,onChange:n}))}),b=function(e){var t=e.addPerson,n=e.newPerson,a=e.handlePersonChange,o=e.newNumber,r=e.handleNumberChange;return u.a.createElement("form",{onSubmit:t},u.a.createElement("div",null,"nimi: ",u.a.createElement("input",{value:n,onChange:a})),u.a.createElement("div",null,"numero: ",u.a.createElement("input",{value:o,onChange:r})),u.a.createElement("div",null,u.a.createElement("button",{type:"submit"},"lis\xe4\xe4")))},E=function(e){var t=e.persons,n=e.setPersons,a=e.personsToShow,o=e.setMessage;return a.map(function(e){return u.a.createElement("div",{key:e.id},e.name," ",e.number," ",u.a.createElement("button",{onClick:function(){return function(e){var a=t.find(function(t){return t.id===e});window.confirm("Poistetaanko ".concat(a.name,"?"))&&(h(e),n(t.filter(function(t){return t.id!==e})),o({text:"Poistettiin '".concat(a.name,"'"),state:"info"}),setTimeout(function(){o({text:null})},5e3))}(e.id)}},"poista"))})},w=function(e){var t=e.message,n=e.state;return null===t?null:u.a.createElement("div",{className:n},t)},g=function(){var e=Object(a.useState)([]),t=Object(i.a)(e,2),n=t[0],o=t[1],r=Object(a.useState)(""),l=Object(i.a)(r,2),s=l[0],m=l[1],h=Object(a.useState)(""),g=Object(i.a)(h,2),j=g[0],x=g[1],C=Object(a.useState)(""),O=Object(i.a)(C,2),P=O[0],S=O[1],k=Object(a.useState)({text:null,state:null}),T=Object(i.a)(k,2),N=T[0],y=T[1];Object(a.useEffect)(function(){f().then(function(e){o(e.data)})},[]);var A=P?n.filter(function(e){return e.name.toUpperCase().includes(P.toUpperCase())}):n;return u.a.createElement("div",null,u.a.createElement("h2",null,"Puhelinluettelo"),u.a.createElement(w,{message:N.text,state:N.state}),u.a.createElement(v,{showAll:P,handleShowChange:function(e){S(e.target.value)}}),u.a.createElement("h3",null,"lis\xe4\xe4 uusi"),u.a.createElement(b,{addPerson:function(e){var t=n.map(function(e){return e.name});e.preventDefault();var a={name:s,number:j};if(t.includes(s)){if(window.confirm("".concat(s," on jo luettelossa, korvataanko vanha numero uudella?"))){var u=n.find(function(e){return e.name===s}),r=Object(c.a)({},u,{number:j});p(u.id,r).then(function(e){o(n.map(function(t){return t!==u?t:e.data})),y({text:"Henkil\xf6n '".concat(s,"' numero p\xe4ivitetty"),state:"info"}),setTimeout(function(){y({text:null})},5e3)}).catch(function(e){y({text:"Henkil\xf6 '".concat(s," oli jo poistettu"),state:"error"}),setTimeout(function(){y({text:null})},5e3),o(n.filter(function(e){return e.id!==u.id}))})}}else d(a).then(function(e){o(n.concat(e.data)),y({text:"Lis\xe4ttiin '".concat(s,"'"),state:"info"}),setTimeout(function(){y({text:null})},5e3)}).catch(function(e){y({text:e.response.data.error,state:"error"}),setTimeout(function(){y({text:null})},5e3)});m(""),x("")},newPerson:s,handlePersonChange:function(e){m(e.target.value)},newNumber:j,handleNumberChange:function(e){x(e.target.value)}}),u.a.createElement("h3",null,"Numerot"),u.a.createElement(E,{persons:n,setPersons:o,personsToShow:A,setMessage:y}))};r.a.render(u.a.createElement(g,null),document.getElementById("root"))}},[[13,1,2]]]);
//# sourceMappingURL=main.130b6cd2.chunk.js.map